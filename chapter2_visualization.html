<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬äºŒç« æ•°æ®å¯è§†åŒ– - äº¤äº’å¼å›¾è¡¨å±•ç¤º</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            color: white;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .dataset-selector {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        
        .dataset-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .dataset-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .dataset-card:hover {
            transform: translateY(-5px);
            border-color: #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .dataset-card.active {
            border-color: #667eea;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        }
        
        .dataset-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .dataset-title {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        
        .dataset-desc {
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .chart-container {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 1.5rem;
            color: #2c3e50;
        }
        
        .chart-controls {
            display: flex;
            gap: 10px;
        }
        
        .chart-type-btn {
            padding: 8px 15px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .chart-type-btn.active {
            background: #667eea;
            color: white;
        }
        
        .chart-wrapper {
            position: relative;
            height: 400px;
        }
        
        canvas {
            width: 100% !important;
            height: 100% !important;
        }
        
        .data-info {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ç¬¬äºŒç« æ•°æ®å¯è§†åŒ–å¹³å°</h1>
            <p class="subtitle">åŸºäºã€Šæ•°æ®å¯è§†åŒ–ã€‹ç¬¬äºŒç« å†…å®¹çš„äº¤äº’å¼å›¾è¡¨å±•ç¤º</p>
        </header>
        
        <div class="dataset-selector">
            <h2>é€‰æ‹©æ•°æ®é›†</h2>
            <div class="dataset-grid" id="datasetGrid">
                <!-- æ•°æ®é›†å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
            </div>
        </div>
        
        <div class="chart-container">
            <div class="chart-header">
                <h2 class="chart-title" id="chartTitle">è¯·é€‰æ‹©æ•°æ®é›†å¼€å§‹å¯è§†åŒ–</h2>
                <div class="chart-controls" id="chartControls" style="display: none;">
                    <button class="chart-type-btn active" data-type="line">æŠ˜çº¿å›¾</button>
                    <button class="chart-type-btn" data-type="bar">æŸ±çŠ¶å›¾</button>
                    <button class="chart-type-btn" data-type="pie">é¥¼å›¾</button>
                    <button class="chart-type-btn" data-type="radar">é›·è¾¾å›¾</button>
                </div>
            </div>
            
            <div class="chart-wrapper">
                <canvas id="mainChart"></canvas>
            </div>
            
            <div class="data-info" id="dataInfo">
                å…± 0 æ¡æ•°æ® | å½“å‰å›¾è¡¨ç±»å‹: æœªé€‰æ‹©
            </div>
        </div>
    </div>

    <script>
        // ç¬¬äºŒç« æ•°æ®é›†
        const chapter2Data = {
            temperatureData: {
                title: 'æœªæ¥15å¤©æœ€é«˜æ°”æ¸©å’Œæœ€ä½æ°”æ¸©',
                description: 'å±•ç¤ºæœªæ¥15å¤©çš„æœ€é«˜æ°”æ¸©å’Œæœ€ä½æ°”æ¸©å˜åŒ–è¶‹åŠ¿',
                data: [
                    { day: 4, maxTemp: 32, minTemp: 19 },
                    { day: 5, maxTemp: 33, minTemp: 19 },
                    { day: 6, maxTemp: 34, minTemp: 20 },
                    { day: 7, maxTemp: 34, minTemp: 22 },
                    { day: 8, maxTemp: 33, minTemp: 22 },
                    { day: 9, maxTemp: 31, minTemp: 21 },
                    { day: 10, maxTemp: 30, minTemp: 22 },
                    { day: 11, maxTemp: 29, minTemp: 16 },
                    { day: 12, maxTemp: 30, minTemp: 18 },
                    { day: 13, maxTemp: 29, minTemp: 18 },
                    { day: 14, maxTemp: 26, minTemp: 17 },
                    { day: 15, maxTemp: 23, minTemp: 14 },
                    { day: 16, maxTemp: 21, minTemp: 15 },
                    { day: 17, maxTemp: 25, minTemp: 16 },
                    { day: 18, maxTemp: 31, minTemp: 16 }
                ]
            },
            
            alibabaGMVData: {
                title: '2013-2019è´¢å¹´é˜¿é‡Œå·´å·´æ·˜å®å’Œå¤©çŒ«å¹³å°GMV',
                description: 'å±•ç¤ºé˜¿é‡Œå·´å·´ç”µå•†å¹³å°å¹´åº¦äº¤æ˜“æ€»é¢(GMV)çš„å¢é•¿è¶‹åŠ¿',
                data: [
                    { year: 'FY2013', gmv: 10770 },
                    { year: 'FY2014', gmv: 16780 },
                    { year: 'FY2015', gmv: 24440 },
                    { year: 'FY2016', gmv: 30920 },
                    { year: 'FY2017', gmv: 37670 },
                    { year: 'FY2018', gmv: 48200 },
                    { year: 'FY2019', gmv: 57270 }
                ]
            },
            
            onlineShoppingRateData: {
                title: 'å„å•†å“ç§ç±»çš„ç½‘è´­æ›¿ä»£ç‡',
                description: 'å±•ç¤ºä¸åŒå•†å“ç§ç±»åœ¨ç½‘è´­ä¸­çš„æ›¿ä»£ç‡',
                data: [
                    { category: 'å®¶æ”¿æœåŠ¡', rate: 0.959 },
                    { category: 'æœºç¥¨ç«è½¦ç¥¨', rate: 0.951 },
                    { category: 'å®¶å…·', rate: 0.935 },
                    { category: 'æ‰‹æœºé…ä»¶', rate: 0.924 },
                    { category: 'è®¡ç®—æœºäº§å“', rate: 0.893 },
                    { category: 'æ±½è½¦ç”¨å“', rate: 0.892 },
                    { category: 'é€šä¿¡å……å€¼', rate: 0.865 },
                    { category: 'ä¸ªäººæŠ¤ç†', rate: 0.863 },
                    { category: 'ä¹¦æŠ¥æ‚å¿—', rate: 0.860 },
                    { category: 'é¤é¥®æ—…æ¸¸', rate: 0.856 },
                    { category: 'å®¶ç”¨ç”µå™¨', rate: 0.854 },
                    { category: 'é£Ÿå“é¥®æ–™', rate: 0.835 },
                    { category: 'å®¶åº­æ—¥æ‚', rate: 0.826 },
                    { category: 'ä¿é™©ç¥¨åŠ¡', rate: 0.816 },
                    { category: 'æœè£…é‹å¸½', rate: 0.798 },
                    { category: 'æ•°ç äº§å“', rate: 0.765 },
                    { category: 'å…¶ä»–æœåŠ¡', rate: 0.763 },
                    { category: 'å·¥è‰ºå“', rate: 0.670 }
                ]
            },
            
            carSpeedBrakingData: {
                title: 'æ±½è½¦é€Ÿåº¦ä¸åˆ¶åŠ¨è·ç¦»çš„å…³ç³»',
                description: 'å±•ç¤ºæ±½è½¦åœ¨ä¸åŒé€Ÿåº¦ä¸‹çš„åˆ¶åŠ¨è·ç¦»å…³ç³»',
                data: [
                    { speed: 10, distance: 0.5 },
                    { speed: 20, distance: 2.0 },
                    { speed: 30, distance: 4.4 },
                    { speed: 40, distance: 7.9 },
                    { speed: 50, distance: 12.3 },
                    { speed: 60, distance: 17.7 },
                    { speed: 70, distance: 24.1 },
                    { speed: 80, distance: 31.5 },
                    { speed: 90, distance: 39.9 },
                    { speed: 100, distance: 49.2 },
                    { speed: 110, distance: 59.5 },
                    { speed: 120, distance: 70.8 },
                    { speed: 130, distance: 83.1 },
                    { speed: 140, distance: 96.4 },
                    { speed: 150, distance: 110.7 },
                    { speed: 160, distance: 126.0 },
                    { speed: 170, distance: 142.2 },
                    { speed: 180, distance: 159.4 },
                    { speed: 190, distance: 177.6 },
                    { speed: 200, distance: 196.8 }
                ]
            },
            
            logisticsCostData: {
                title: 'ç‰©æµå…¬å¸ç‰©æµè´¹ç”¨ç»Ÿè®¡',
                description: 'å±•ç¤ºä¸‰å®¶ç‰©æµå…¬å¸å„æœˆçš„ç‰©æµè´¹ç”¨ç»Ÿè®¡',
                data: [
                    { month: '1æœˆ', companyA: 198, companyB: 203, companyC: 185 },
                    { month: '2æœˆ', companyA: 215, companyB: 236, companyC: 205 },
                    { month: '3æœˆ', companyA: 245, companyB: 200, companyC: 226 },
                    { month: '4æœˆ', companyA: 222, companyB: 236, companyC: 199 },
                    { month: '5æœˆ', companyA: 200, companyB: 269, companyC: 238 },
                    { month: '6æœˆ', companyA: 236, companyB: 216, companyC: 200 },
                    { month: '7æœˆ', companyA: 201, companyB: 298, companyC: 250 },
                    { month: '8æœˆ', companyA: 253, companyB: 333, companyC: 209 },
                    { month: '9æœˆ', companyA: 236, companyB: 301, companyC: 246 },
                    { month: '10æœˆ', companyA: 200, companyB: 349, companyC: 219 },
                    { month: '11æœˆ', companyA: 266, companyB: 360, companyC: 253 },
                    { month: '12æœˆ', companyA: 290, companyB: 368, companyC: 288 }
                ]
            }
        };

        // å›¾è¡¨å®ä¾‹å’Œå½“å‰çŠ¶æ€
        let currentChart = null;
        let currentDataset = null;
        let currentChartType = 'line';

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            renderDatasetCards();
            setupChartControls();
        }

        // æ¸²æŸ“æ•°æ®é›†å¡ç‰‡
        function renderDatasetCards() {
            const grid = document.getElementById('datasetGrid');
            grid.innerHTML = '';
            
            Object.entries(chapter2Data).forEach(([key, dataset]) => {
                const card = document.createElement('div');
                card.className = 'dataset-card';
                card.innerHTML = `
                    <div class="dataset-icon">${getDatasetIcon(key)}</div>
                    <div class="dataset-title">${dataset.title}</div>
                    <div class="dataset-desc">${dataset.description}</div>
                `;
                card.addEventListener('click', () => selectDataset(key, dataset));
                grid.appendChild(card);
            });
        }

        // è·å–æ•°æ®é›†å›¾æ ‡
        function getDatasetIcon(datasetKey) {
            const icons = {
                temperatureData: 'ğŸŒ¡ï¸',
                alibabaGMVData: 'ğŸ’°',
                onlineShoppingRateData: 'ğŸ›’',
                carSpeedBrakingData: 'ğŸš—',
                logisticsCostData: 'ğŸšš'
            };
            return icons[datasetKey] || 'ğŸ“Š';
        }

        // é€‰æ‹©æ•°æ®é›†
        function selectDataset(key, dataset) {
            currentDataset = { key, ...dataset };
            
            // æ›´æ–°UIçŠ¶æ€
            document.querySelectorAll('.dataset-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            document.getElementById('chartTitle').textContent = dataset.title;
            document.getElementById('chartControls').style.display = 'flex';
            document.getElementById('dataInfo').textContent = 
                `å…± ${dataset.data.length} æ¡æ•°æ® | å½“å‰å›¾è¡¨ç±»å‹: ${currentChartType}`;
            
            // æ ¹æ®æ•°æ®ç±»å‹è‡ªåŠ¨é€‰æ‹©å›¾è¡¨ç±»å‹
            if (key === 'onlineShoppingRateData') {
                currentChartType = 'bar';
            } else if (key === 'logisticsCostData') {
                currentChartType = 'line';
            } else {
                currentChartType = 'line';
            }
            
            updateChartTypeButtons();
            renderChart();
        }

        // è®¾ç½®å›¾è¡¨ç±»å‹æ§åˆ¶
        function setupChartControls() {
            document.querySelectorAll('.chart-type-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    currentChartType = e.target.dataset.type;
                    updateChartTypeButtons();
                    renderChart();
                });
            });
        }

        // æ›´æ–°å›¾è¡¨ç±»å‹æŒ‰é’®çŠ¶æ€
        function updateChartTypeButtons() {
            document.querySelectorAll('.chart-type-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.type === currentChartType);
            });
        }

        // æ¸²æŸ“å›¾è¡¨
        function renderChart() {
            if (!currentDataset) return;
            
            const ctx = document.getElementById('mainChart').getContext('2d');
            
            // é”€æ¯ç°æœ‰å›¾è¡¨
            if (currentChart) {
                currentChart.destroy();
            }
            
            const config = getChartConfig(currentDataset, currentChartType);
            currentChart = new Chart(ctx, config);
            
            // æ›´æ–°æ•°æ®ä¿¡æ¯
            document.getElementById('dataInfo').textContent = 
                `å…± ${currentDataset.data.length} æ¡æ•°æ® | å½“å‰å›¾è¡¨ç±»å‹: ${getChartTypeName(currentChartType)}`;
        }

        // è·å–å›¾è¡¨é…ç½®
        function getChartConfig(dataset, chartType) {
            const commonConfig = {
                responsive: true,
                maintainAspectRatio: false,
            };
            
            switch (chartType) {
                case 'line':
                    return getLineChartConfig(dataset, commonConfig);
                case 'bar':
                    return getBarChartConfig(dataset, commonConfig);
                case 'pie':
                    return getPieChartConfig(dataset, commonConfig);
                case 'radar':
                    return getRadarChartConfig(dataset, commonConfig);
                default:
                    return getLineChartConfig(dataset, commonConfig);
            }
        }

        // è·å–æŠ˜çº¿å›¾é…ç½®
        function getLineChartConfig(dataset, commonConfig) {
            const labels = dataset.data.map(item => item.day || item.speed || item.month || item.year);
            const datasets = [];
            
            if (dataset.key === 'temperatureData') {
                datasets.push({
                    label: 'æœ€é«˜æ°”æ¸©',
                    data: dataset.data.map(item => item.maxTemp),
                    borderColor: '#FF6B6B',
                    backgroundColor: 'rgba(255, 107, 107, 0.1)',
                    tension: 0.4
                });
                datasets.push({
                    label: 'æœ€ä½æ°”æ¸©',
                    data: dataset.data.map(item => item.minTemp),
                    borderColor: '#4ECDC4',
                    backgroundColor: 'rgba(78, 205, 196, 0.1)',
                    tension: 0.4
                });
            } else if (dataset.key === 'logisticsCostData') {
                datasets.push({
                    label: 'å…¬å¸A',
                    data: dataset.data.map(item => item.companyA),
                    borderColor: '#FF6B6B',
                    backgroundColor: 'rgba(255, 107, 107, 0.1)',
                    tension: 0.4
                });
                datasets.push({
                    label: 'å…¬å¸B',
                    data: dataset.data.map(item => item.companyB),
                    borderColor: '#4ECDC4',
                    backgroundColor: 'rgba(78, 205, 196, 0.1)',
                    tension: 0.4
                });
                datasets.push({
                    label: 'å…¬å¸C',
                    data: dataset.data.map(item => item.companyC),
                    borderColor: '#45B7D1',
                    backgroundColor: 'rgba(69, 183, 209, 0.1)',
                    tension: 0.4
                });
            } else {
                datasets.push({
                    label: dataset.key === 'carSpeedBrakingData' ? 'åˆ¶åŠ¨è·ç¦»' : 'GMV',
                    data: dataset.data.map(item => item.distance || item.gmv),
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    tension: 0.4
                });
            }
            
            return {
                ...commonConfig,
                type: 'line',
                data: { labels, datasets },
                options: {
                    ...commonConfig.options,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            };
        }

        // è·å–æŸ±çŠ¶å›¾é…ç½®
        function getBarChartConfig(dataset, commonConfig) {
            const labels = dataset.data.map(item => item.category || item.year);
            const data = dataset.data.map(item => item.rate || item.gmv);
            
            return {
                ...commonConfig,
                type: 'bar',
                data: {
                    labels,
                    datasets: [{
                        label: dataset.key === 'onlineShoppingRateData' ? 'æ›¿ä»£ç‡' : 'GMV',
                        data,
                        backgroundColor: 'rgba(102, 126, 234, 0.8)',
                        borderColor: 'rgba(102, 126, 234, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    ...commonConfig.options,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            };
        }

        // è·å–é¥¼å›¾é…ç½®
        function getPieChartConfig(dataset, commonConfig) {
            const labels = dataset.data.map(item => item.category || item.year);
            const data = dataset.data.map(item => item.rate || item.gmv);
            
            return {
                ...commonConfig,
                type: 'pie',
                data: {
                    labels,
                    datasets: [{
                        data,
                        backgroundColor: [
                            '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7',
                            '#DDA0DD', '#98D8C8', '#F7DC6F', '#BB8FCE', '#85C1E9'
                        ]
                    }]
                }
            };
        }

        // è·å–é›·è¾¾å›¾é…ç½®
        function getRadarChartConfig(dataset, commonConfig) {
            // ç®€åŒ–å®ç°ï¼Œä½¿ç”¨æŠ˜çº¿å›¾ä»£æ›¿
            return getLineChartConfig(dataset, commonConfig);
        }

        // è·å–å›¾è¡¨ç±»å‹åç§°
        function getChartTypeName(type) {
            const names = {
                line: 'æŠ˜çº¿å›¾',
                bar: 'æŸ±çŠ¶å›¾',
                pie: 'é¥¼å›¾',
                radar: 'é›·è¾¾å›¾'
            };
            return names[type] || type;
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initPage);
    </script>
</body>
</html>